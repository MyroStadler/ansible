---
all:
  hosts:
    medium-rds.mstadler.devonly.net:
  vars:
    allow_external_connections_from:
      - ip: '10.16.8.73'
        mask: '32'
      - ip: '2a00:1098:25:179::b'
        mask: '128'
    ansible_user: centos
    ansible_become_pass: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      30623733313361373337336533646530623832316262306163336161363662356630646162396361
      6266636463326632363534393866336462643733363135350a323463313265613861383065323436
      39323062366137646634333765383265323366626333613065393731613834353563346633633231
      3964363339393163610a643065613537313134663732313162383438616633353462613661646132
      30346138373934313134363536393731343365313237613839306162613664633133353465646265
      6431386238373635303536373131386432653461626662343361

    install_database: true
#    install_env_database_protocol: pgsql
#    install_env_database_port: 5432
    install_env_database_protocol: mysql
    install_env_database_host: 127.0.0.1
    install_env_database_user: test
    install_env_database_password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      35633161633965363464353735633638336430373839653634333439396265333166653930616439
      6266313361353331643233343136373735396365626363340a323438303139363162653238343832
      31303364656662396539386232333037663938306335656439376330666636326535363238383735
      3633663862633165310a363361616339646539373164613064333863643133666636366338623738
      3161
    install_env_database_name: medium_dev
    install_env_database_root_password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      63616635363963333033346234323735646539326431333837633136313265343936386162346534
      3663666461643235323565383232346536303365373637350a393931356433393961323439333637
      36336131623532326535343731656636653863633832376236363763663130343563373831333936
      6535356663343534320a383038333566653532626532306362396665666337643634633862383661
      6132

    postgresql_global_config_options:
      - option: listen_addresses
        value: '*'
    postgresql_hba_entries:
      - { type: local, database: all, user: postgres, auth_method: peer }
      - { type: local, database: all, user: all, auth_method: peer }
      - { type: host, database: all, user: all, address: '127.0.0.1/32', auth_method: md5 }
      - { type: host, database: all, user: all, address: '::1/128', auth_method: md5 }
#      some postgresql_hba_entries are added in a loop later